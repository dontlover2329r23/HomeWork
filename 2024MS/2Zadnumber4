import numpy as np
from scipy.stats import norm


# –ó–∞–¥–∞–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
data = [122,116.8,118.5,118.5,121,121.5,126,121.8,121.5,122.9,119,121,121,125.9,122,119.2,126,125,116.7,121,120,124.5,
121,127,118.3,117,120,117.8,120.8,119,125,120.6,120.2,122,118.7,120,121.4,119.5,125,123,118,122,122.5,119,123,117.2,
119.5,125.1,124.3,122.8,124,121.5,126.5,122.5,123,115,126.2,120.5,123,122.5,123,121.5,116.9,123.8,121.5,118,121.7,
120,122.5,123,121,122.5,119.5,122.5,120.5,121,121.2,118.9,124,123,119.2,119.5
]

# –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
lower_bounds = np.array([115,120])
upper_bounds = np.array([120,125])

# –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
data_grouped = (lower_bounds + upper_bounds) / 2

# –í—ã—á–∏—Å–ª—è–µ–º —Ç–æ—á–µ—á–Ω—É—é –æ—Ü–µ–Ω–∫—É –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
variance_grouped = np.sum((upper_bounds - lower_bounds)**2) / (2 * len(data))
std_dev_grouped = np.sqrt(variance_grouped)

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ ùõº =0.1 –∏ –Ω–∞ –µ–≥–æ –æ—Å–Ω–æ–≤–µ –≤—ã—á–∏—Å–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ ùëÑ = (1 - ùõº) =0.9

# –ù–∞—Ö–æ–¥–∏–º –∫–≤–∞–Ω—Ç–∏–ª–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Å —É—Ä–æ–≤–Ω–µ–º –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ ùëÑ =0.9 –∏ —É—Ä–æ–≤–Ω–µ–º –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ ùõº =0.1
z_lower = norm.ppf(0.05) # –î–ª—è –Ω–∏–∂–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã

# –í—ã—á–∏—Å–ª—è–µ–º –Ω–∏–∂–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
lower_bound_grouped = std_dev_grouped - z_lower * np.sqrt(2 * variance_grouped / len(data))

# –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
print("\n–¢–æ—á–µ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:")
print("–î–∏—Å–ø–µ—Ä—Å–∏—è (–Ω–µ—Å–º–µ—â–µ–Ω–Ω–∞—è):", variance_grouped)
print("–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:", std_dev_grouped)
print("\n–î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —Å —É—Ä–æ–≤–Ω–µ–º –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ Q =0.9 –∏ –≤–∏–¥–æ–º –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≥—Ä–∞–Ω–∏—Ü—ã '–Ω–∏–∂–Ω—è—è':")
print("–ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:", lower_bound_grouped)
